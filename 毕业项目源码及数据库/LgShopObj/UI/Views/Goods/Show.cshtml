@using Models;
@model List<GoodsTable>
@{
    List<GoodsPhoto> GoodsPhoto = ViewBag.GoodsPhoto;
    List<GoodsTable> list = TempData["Goods"] as List<GoodsTable>;
    int pageindex = ViewBag.pageindex??1;
    double count = ViewBag.count??Math.Ceiling(list.Count()/12.00);
}
@{
    foreach (var item in Model??list.Take(12))
    {
        <a href="#" class="div3_a">
            <div class="card" style="width: 18rem;">
                <img height="180" src="~/Content/GoodImgs/@GoodsPhoto.FirstOrDefault(p=>p.GoodsID==item.GoodsID).PhotoPath" class="card-img-top" alt="...">
                <div class="card-body">
                    <div class="card-div1">@item.GoodsName</div>
                    <div class="card-div2">@item.GoodsDescribe</div>
                    <div class="card-div3">
                        <span class="span-left">@string.Format("{0:C}", item.GoodsPrice)</span>
                        <span class="span-right">@string.Format("{0:C}", item.OldGoodsPrice)</span>
                    </div>
                </div>
            </div>
        </a>
    }
}
@*按钮部分*@
<div class="Gindex-div4">
    @*分页位置*@
    <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">

            @{
                if (pageindex <= 1)
                {
                    <li class="page-item disabled">
                        <a class="page-link" href="#" tabindex="-1" aria-disabled="true">上一页</a>
                    </li>
                }
                else
                {
                    <li class="page-item">
                        @Ajax.ActionLink("上一页", "Show", "Goods", new { pageindex = pageindex - 1 }, new AjaxOptions { HttpMethod = "Post", UpdateTargetId = "Goods_1", InsertionMode = InsertionMode.Replace }, new { @class = "page-link" })
                    </li>
                }
            }

            @{
                if (pageindex != 1 && pageindex != count)
                {
                    for (int i = pageindex - 1; i < pageindex + 2; i++)
                    {
                        if (i == pageindex)
                        {
                            <li class="page-item active">
                                @Ajax.ActionLink(i.ToString(), "Show", "Goods", new { pageindex = i }, new AjaxOptions { HttpMethod = "Post", UpdateTargetId = "Goods_1", InsertionMode = InsertionMode.Replace }, new { @class = "page-link" })
                            </li>
                        }
                        else if (i <= count)
                        {
                            <li class="page-item">
                                @Ajax.ActionLink(i.ToString(), "Show", "Goods", new { pageindex = i }, new AjaxOptions { HttpMethod = "Post", UpdateTargetId = "Goods_1", InsertionMode = InsertionMode.Replace }, new { @class = "page-link" })
                            </li>
                        }
                    }
                }
                else if (pageindex == 1)
                {
                    for (int i = 0; i <= pageindex + 2; i++)
                    {
                        if (i == pageindex)
                        {
                            <li class="page-item active">
                                @Ajax.ActionLink(i.ToString(), "Show", "Goods", new { pageindex = i }, new AjaxOptions { HttpMethod = "Post", UpdateTargetId = "Goods_1", InsertionMode = InsertionMode.Replace }, new { @class = "page-link" })
                            </li>
                        }
                        else if (i > 0 && i <= count)
                        {
                            <li class="page-item">
                                @Ajax.ActionLink(i.ToString(), "Show", "Goods", new { pageindex = i }, new AjaxOptions { HttpMethod = "Post", UpdateTargetId = "Goods_1", InsertionMode = InsertionMode.Replace }, new { @class = "page-link" })
                            </li>
                        }
                    }
                }
                else
                {
                    for (int i = pageindex - 2; i <= count; i++)
                    {
                        if (i == count)
                        {
                            <li class="page-item active">
                                @Ajax.ActionLink(i.ToString(), "Show", "Goods", new { pageindex = i }, new AjaxOptions { HttpMethod = "Post", UpdateTargetId = "Goods_1", InsertionMode = InsertionMode.Replace }, new { @class = "page-link" })
                            </li>
                        }
                        else if (i > 0)
                        {
                            <li class="page-item">
                                @Ajax.ActionLink(i.ToString(), "Show", "Goods", new { pageindex = i }, new AjaxOptions { HttpMethod = "Post", UpdateTargetId = "Goods_1", InsertionMode = InsertionMode.Replace }, new { @class = "page-link" })
                            </li>
                        }
                    }
                }
            }
            @{
                if (pageindex == count)
                {
                    <li class="page-item disabled">
                        <a class="page-link" href="#" tabindex="-1" aria-disabled="true">下一页</a>
                    </li>
                }
                else
                {
                    <li class="page-item">
                        @Ajax.ActionLink("下一页", "Show", "Goods", new { pageindex = pageindex + 1 }, new AjaxOptions { HttpMethod = "Post", UpdateTargetId = "Goods_1", InsertionMode = InsertionMode.Replace }, new { @class = "page-link" })
                    </li>
                }
            }
        </ul>
    </nav>
</div>
