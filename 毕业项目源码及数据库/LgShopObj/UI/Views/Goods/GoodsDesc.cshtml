
@{
    ViewBag.Title = "GoodsDesc";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@*//样式表*@
<link href="~/Content/css/GoodsDesc.css" rel="stylesheet" />
<link href="~/Content/css/style.css" rel="stylesheet" />
@*导入放大镜脚本*@
@*<script src="~/Scripts/MyJs/move.js"></script>*@
<script src="~/Scripts/MyJs/tools.js"></script>

<div class="Desc_div">
    <div class="Desc_div1">
        <span class="div1_span"></span><span>&nbsp;&nbsp;商品信息</span>
    </div>
    <div class="wrap">
        <div class="biger" id="biger"></div>
        <div class="imgs">
            <div class="main" id="main">
                <div class="mask" id="mask"></div>
            </div>
            <ul class="smaller" id="smaller"></ul>
        </div>
    </div>
    <div class="Desc_div2">
        <ul class="Ddiv2_ul">
            <li><h5 class="Ddiv2_ul--h5">商品的名称啊啊啊啊</h5></li>
            <li><span class="Ddiv2_ul--span1">商品的名称啊啊啊啊</span></li>
            <li>
                <div class="Ddiv2_ul--div1">
                    市场价：<span class="Ddiv2_ul--span2">￥800.00</span><br />
                    商城价：<span class="Ddiv2_ul--span3">￥155.00</span>
                </div>
            </li>
            <li>
                <div class="Ddiv2_ul--div2">
                    <span class="Ddiv2_ul--span4 span-solid">销量：<span class="span-red">48484</span></span>
                    <span class="Ddiv2_ul--span4 span-solid">累计评价：<span class="span-red">84</span></span>
                    <span class="Ddiv2_ul--span4">商品评价&nbsp;⭐⭐⭐⭐⭐</span>
                </div>
            </li>
            <li>
                <div class="Ddiv2_ul--div3">
                    购买数量:&nbsp;&nbsp;<button>-</button><input type="text" value="1"/><button>+</button>&nbsp;&nbsp;(当前库存：<span class="span-red">484848</span>&nbsp;件)
                </div>
            </li>
            <li>
                <div class="Ddiv2_ul--div4">
                    <button class="bug">立即购买</button>
                    <button class="ion-ios-cart-outline goshopcar">&nbsp;&nbsp;加入购物车</button>
                </div>
            </li>
        </ul>
    </div>
    <div class="Desc_div3">
        <div class="Ddiv3_div1 style_1">商品评价(33)</div>
        <div class="Ddiv3_div1">好评(22)</div>
        <div class="Ddiv3_div1">中评(11)</div>
        <div class="Ddiv3_div1">差评(1)</div>
    </div>
    <div class="Desc_div4">
        <div class="div4_div1">
            <div class="div4_div1--div1">用户评分:⭐⭐⭐⭐⭐<span class="pl_time">评分时间：2020.6.10</span></div>
            <div class="div4_div1--div2">
                <div class="div_user"><img src="~/Content/Images/default.jpg" /></div>
                <span class="div_username">用户名</span>
            </div>
            <div class="div4_div1--div3">评论详情:&nbsp;<span class="user_pl">真的不错啊！</span></div>
        </div>
        <div class="div4_div1">
            <div class="div4_div1--div1">用户评分:⭐⭐⭐⭐⭐<span class="pl_time">评分时间：2020.6.10</span></div>
            <div class="div4_div1--div2">
                <div class="div_user"><img src="~/Content/Images/default.jpg" /></div>
                <span class="div_username">用户名</span>
            </div>
            <div class="div4_div1--div3">评论详情:&nbsp;<span class="user_pl">真的不错啊！</span></div>
        </div>
        <div class="div4_div1">
            <div class="div4_div1--div1">用户评分:⭐⭐⭐⭐⭐<span class="pl_time">评分时间：2020.6.10</span></div>
            <div class="div4_div1--div2">
                <div class="div_user"><img src="~/Content/Images/default.jpg" /></div>
                <span class="div_username">用户名</span>
            </div>
            <div class="div4_div1--div3">评论详情:&nbsp;<span class="user_pl">
                @{for (int i = 0; i < 20; i++)
                {
                    @:真的不错啊！
                }} </span></div>
        </div>
    </div>
</div>

@section scripts{
    <script type="text/javascript">
        $(function () {
            //点击切换样式
            $('.Ddiv3_div1').click(function () {
                $(this).addClass('style_1').siblings().removeClass('style_1');
            })
            BigShow();
            function BigShow() {
                var biger = document.getElementById('biger');
                var main = document.getElementById('main');
                var smaller = document.getElementById('smaller');
                var mask = document.getElementById('mask');
                var wrap = biger.parentNode;
                var imgArr = [
                    { "path": "../Content/Images/ad-1.jpg" },
                    { "path": "../Content/Images/ad-2.jpg" },
                    { "path": "../Content/Images/ad-3.jpg" },
                    { "path": "../Content/Images/ad-4.jpg" },
                    { "path": "../Content/Images/ad-5.jpg" }
                ];
                var imgSum = imgArr.length;
                if (imgSum > 5) {
                    imgSum = 5;
                }
                for (var i = 0; i < imgSum; i++) {
                    var lis = document.createElement('li');
                    var imgs = document.createElement('img');
                    imgs.src = imgArr[i].path;
                    lis.appendChild(imgs);
                    smaller.appendChild(lis);
                }
                var mainImg = document.createElement('img');
                var bigImg = document.createElement('img');
                var liArr = smaller.children;
                bigImg.src = mainImg.src = liArr[0].children[0].src;
                main.insertBefore(mainImg, mask);
                biger.appendChild(bigImg);
                var bigPic = biger.children[0];
                liArr[0].className = 'current';
                for (var i = 0; i < liArr.length; i++) {
                    liArr[i].index = i;
                    liArr[i].onclick = function () {
                        this.className = 'current';
                        bigPic.src = main.children[0].src = this.children[0].src;
                        for (var j = 0; j < liArr.length; j++) {
                            if (this != liArr[j]) {
                                liArr[j].removeAttribute('class');
                                liArr[j].removeAttribute('className');
                            }
                        }
                    }
                }
                main.onmouseenter = function () {
                    mask.style.display = 'block';
                    biger.style.display = 'block';
                }
                main.onmouseleave = function () {
                    mask.style.display = 'none';
                    biger.style.display = 'none';
                }
                main.onmousemove = function (e) {
                    var e = e || window.event;
                    var pagex = e.pageX || scroll().left + e.clientX;
                    var pagey = e.pageY || scroll().top + e.clientY;
                    pagex = pagex - wrap.offsetLeft - mask.offsetWidth / 2;;
                    pagey = pagey - wrap.offsetTop - mask.offsetHeight / 2;
                    if (pagex < 0) {
                        pagex = 0;
                    }
                    if (pagey < 0) {
                        pagey = 0;
                    }
                    if (pagex > main.offsetWidth - mask.offsetWidth) {
                        pagex = main.offsetWidth - mask.offsetWidth;
                    }
                    if (pagey > main.offsetHeight - mask.offsetHeight) {
                        pagey = main.offsetHeight - mask.offsetHeight;
                    }
                    mask.style.left = pagex + 'px';
                    mask.style.top = pagey + 'px';
                    var scale = (bigPic.offsetWidth - biger.offsetWidth) / (main.offsetWidth - mask.offsetWidth);
                    var xx = pagex * scale;
                    var yy = pagey * scale;
                    bigPic.style.left = -xx + 'px';
                    bigPic.style.top = -yy + 'px';
                }
            }
        })
    </script>
}

